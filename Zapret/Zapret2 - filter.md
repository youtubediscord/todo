---
tags:
link:
aliases:
img:
---

## –¢–∏–ø—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ zapret2 –∏ –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

–§–∏–ª—å—Ç—Ä—ã –≤ nfqws2 –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∫–∞–∫–∏–µ –ø–∞–∫–µ—Ç—ã/—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –ø—Ä–æ—Ñ–∏–ª–µ–º –º—É–ª—å—Ç–∏—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.

---

## üìã **–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤**

### 1. **`--filter-l3`** - –§–∏–ª—å—Ç—Ä L3 –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ (IP –≤–µ—Ä—Å–∏—è)

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--filter-l3=ipv4|ipv6
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `ipv4` - —Ç–æ–ª—å–∫–æ IPv4 –ø–∞–∫–µ—Ç—ã
- `ipv6` - —Ç–æ–ª—å–∫–æ IPv6 –ø–∞–∫–µ—Ç—ã
- –ú–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--filter-l3=ipv4           # —Ç–æ–ª—å–∫–æ IPv4
--filter-l3=ipv6           # —Ç–æ–ª—å–∫–æ IPv6
--filter-l3=ipv4,ipv6      # –æ–±–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

---

### 2. **`--filter-tcp`** - –§–∏–ª—å—Ç—Ä TCP –ø–æ—Ä—Ç–æ–≤

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--filter-tcp=[~]port1[-port2]|*
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `port` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä: `80`)
- `port1-port2` - –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `1000-2000`)
- `~port` - –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ (–≤—Å–µ –∫—Ä–æ–º–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ)
- `*` - –≤—Å–µ –ø–æ—Ä—Ç—ã
- –ú–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω `--filter-tcp` –∏ –ù–ï —É–∫–∞–∑–∞–Ω `--filter-udp`, —Ç–æ UDP **–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è**
- –§–∏–ª—å—Ç—Ä—É–µ—Ç –∫–∞–∫ source, —Ç–∞–∫ –∏ destination –ø–æ—Ä—Ç—ã

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--filter-tcp=80,443        # —Ç–æ–ª—å–∫–æ –ø–æ—Ä—Ç—ã 80 –∏ 443
--filter-tcp=80-443        # –¥–∏–∞–ø–∞–∑–æ–Ω –æ—Ç 80 –¥–æ 443
--filter-tcp=~443          # –≤—Å–µ –ø–æ—Ä—Ç—ã –ö–†–û–ú–ï 443
--filter-tcp=*             # –≤—Å–µ TCP –ø–æ—Ä—Ç—ã
```

---

### 3. **`--filter-udp`** - –§–∏–ª—å—Ç—Ä UDP –ø–æ—Ä—Ç–æ–≤

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--filter-udp=[~]port1[-port2]|*
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ TCP)
- `port` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ—Ä—Ç
- `port1-port2` - –¥–∏–∞–ø–∞–∑–æ–Ω –ø–æ—Ä—Ç–æ–≤
- `~port` - –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ
- `*` - –≤—Å–µ –ø–æ—Ä—Ç—ã
- –ú–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω `--filter-udp` –∏ –ù–ï —É–∫–∞–∑–∞–Ω `--filter-tcp`, —Ç–æ TCP **–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è**

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--filter-udp=443           # QUIC (UDP/443)
--filter-udp=53,443        # DNS –∏ QUIC
--filter-udp=*             # –≤—Å–µ UDP –ø–æ—Ä—Ç—ã
```

---

### 4. **`--filter-l7`** - –§–∏–ª—å—Ç—Ä L7 –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--filter-l7=proto[,proto,...]
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã:**
1. `all` - –≤—Å–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
2. `unknown` - –Ω–µ–æ–ø–æ–∑–Ω–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
3. `known` - –≤—Å–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
4. `http` - HTTP –ø—Ä–æ—Ç–æ–∫–æ–ª
5. `tls` - TLS/SSL (HTTPS)
6. `quic` - QUIC (HTTP/3)
7. `wireguard` - WireGuard VPN
8. `dht` - DHT (BitTorrent)
9. `discord` - Discord –ø—Ä–æ—Ç–æ–∫–æ–ª
10. `stun` - STUN
11. `xmpp` - XMPP (Jabber)
12. `dns` - DNS
13. `mtproto` - MTProto (Telegram)

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--filter-l7=http           # —Ç–æ–ª—å–∫–æ HTTP
--filter-l7=tls,http       # TLS –∏ HTTP
--filter-l7=quic           # —Ç–æ–ª—å–∫–æ QUIC
--filter-l7=known          # –≤—Å–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã
```

---

### 5. **`--filter-ssid`** - –§–∏–ª—å—Ç—Ä –ø–æ WiFi SSID (—Ç–æ–ª—å–∫–æ –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö)

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--filter-ssid=ssid1[,ssid2,ssid3,...]
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –°–ø–∏—Å–æ–∫ SSID —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ —É–∫–∞–∑–∞–Ω–Ω—ã–º WiFi —Å–µ—Ç—è–º

**–ü—Ä–∏–º–µ—Ä:**
```bash
--filter-ssid=MyHomeWiFi,OfficeNetwork
```

---

## üéØ **–§–∏–ª—å—Ç—Ä—ã –ø–æ IP –∞–¥—Ä–µ—Å–∞–º**

### 6. **`--ipset`** - –í–∫–ª—é—á–∞—é—â–∏–π IP —Ñ–∏–ª—å—Ç—Ä

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--ipset=<filename>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `filename` - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å IP –∞–¥—Ä–µ—Å–∞–º–∏/–ø–æ–¥—Å–µ—Ç—è–º–∏
- –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞: –æ–¥–∏–Ω IP/CIDR –Ω–∞ —Å—Ç—Ä–æ–∫—É
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ IPv4 –∏ IPv6
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ gzip —Å–∂–∞—Ç–∏—è
- –ú–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑

**–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞:**
```
192.168.1.0/24
10.0.0.1
2001:db8::/32
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--ipset=/path/to/iplist.txt
--ipset=/path/to/list1.txt.gz --ipset=/path/to/list2.txt
```

---

### 7. **`--ipset-ip`** - –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ IP

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--ipset-ip=<ip_list>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –°–ø–∏—Å–æ–∫ IP/–ø–æ–¥—Å–µ—Ç–µ–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
- –ë–µ–∑ —Ñ–∞–π–ª–∞, –ø—Ä—è–º–æ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--ipset-ip=192.168.1.0/24,10.0.0.1
--ipset-ip=8.8.8.8,1.1.1.1
```

---

### 8. **`--ipset-exclude`** - –ò—Å–∫–ª—é—á–∞—é—â–∏–π IP —Ñ–∏–ª—å—Ç—Ä

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--ipset-exclude=<filename>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `--ipset`)
- –§–∞–π–ª —Å IP –∞–¥—Ä–µ—Å–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ù–ï –¥–æ–ª–∂–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--ipset-exclude=/path/to/exclude.txt
```

---

### 9. **`--ipset-exclude-ip`** - –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--ipset-exclude-ip=<ip_list>
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--ipset-exclude-ip=192.168.0.0/16,10.0.0.0/8
```

---

## üåê **–§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–æ–º–µ–Ω–∞–º (hostlist)**

### 10. **`--hostlist`** - –í–∫–ª—é—á–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--hostlist=<filename>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `filename` - –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É —Å –¥–æ–º–µ–Ω–∞–º–∏
- –§–æ—Ä–º–∞—Ç: –æ–¥–∏–Ω –¥–æ–º–µ–Ω –Ω–∞ —Å—Ç—Ä–æ–∫—É
- –ü–æ–¥–¥–æ–º–µ–Ω—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ gzip
- –ú–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑

**–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞:**
```
youtube.com
google.com
facebook.com
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- `youtube.com` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç `www.youtube.com`, `m.youtube.com` –∏ —Ç.–¥.

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--hostlist=/path/to/domains.txt
--hostlist=/path/to/list1.txt --hostlist=/path/to/list2.txt.gz
```

---

### 11. **`--hostlist-domains`** - –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--hostlist-domains=<domain_list>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –°–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--hostlist-domains=youtube.com,google.com,facebook.com
```

---

### 12. **`--hostlist-exclude`** - –ò—Å–∫–ª—é—á–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--hostlist-exclude=<filename>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:** (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `--hostlist`)
- –î–æ–º–µ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –ù–ï –¥–æ–ª–∂–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--hostlist-exclude=/path/to/exclude_domains.txt
```

---

### 13. **`--hostlist-exclude-domains`** - –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--hostlist-exclude-domains=<domain_list>
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--hostlist-exclude-domains=local.domain,internal.net
```

---

## ü§ñ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π hostlist**

### 14. **`--hostlist-auto`** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--hostlist-auto=<filename>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `filename` - —Ñ–∞–π–ª –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç DPI –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –¥–æ–º–µ–Ω—ã –≤ —Å–ø–∏—Å–æ–∫

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--hostlist-auto=/var/lib/zapret/auto.txt
```

---

### 15. **`--hostlist-auto-fail-threshold`** - –ü–æ—Ä–æ–≥ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--hostlist-auto-fail-threshold=<int>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞ –≤ –∞–≤—Ç–æ–ª–∏—Å—Ç
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--hostlist-auto-fail-threshold=3
```

---

### 16. **`--hostlist-auto-fail-time`** - –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –Ω–µ—É–¥–∞—á

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--hostlist-auto-fail-time=<int>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –í—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö, –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –Ω–µ—É–¥–∞—á–∏
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--hostlist-auto-fail-time=60    # –≤—Å–µ –Ω–µ—É–¥–∞—á–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 60 —Å–µ–∫—É–Ω–¥
```

---

### 17. **`--hostlist-auto-retrans-threshold`** - –ü–æ—Ä–æ–≥ —Ä–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏–π

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--hostlist-auto-retrans-threshold=<int>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏–π –∑–∞–ø—Ä–æ—Å–∞, –∫–æ—Ç–æ—Ä—ã–µ —Å—á–∏—Ç–∞—é—Ç—Å—è –Ω–µ—É–¥–∞—á–µ–π
- **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--hostlist-auto-retrans-threshold=2
```

---

### 18. **`--hostlist-auto-debug`** - –û—Ç–ª–∞–¥–∫–∞ –∞–≤—Ç–æ–ª–∏—Å—Ç–∞ (–≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä)

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```bash
--hostlist-auto-debug=<logfile>
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ª–æ–≥–æ–≤ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä—ã:**
```bash
--hostlist-auto-debug=/var/log/zapret-auto.log
```

---

## üí° **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã**

### –ü—Ä–∏–º–µ—Ä 1: –ë–∞–∑–æ–≤–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è HTTP/HTTPS
```bash
nfqws2 \
  --filter-tcp=80,443 \
  --filter-l7=http,tls \
  --lua-desync=fake:blob=fake_default_tls
```

### –ü—Ä–∏–º–µ—Ä 2: QUIC —Å hostlist
```bash
nfqws2 \
  --filter-udp=443 \
  --filter-l7=quic \
  --hostlist=/path/to/youtube.txt \
  --lua-desync=fake:blob=fake_default_quic:repeats=6
```

### –ü—Ä–∏–º–µ—Ä 3: –ú—É–ª—å—Ç–∏–ø—Ä–æ—Ñ–∏–ª—å —Å —Ä–∞–∑–Ω—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
```bash
nfqws2 \
  --filter-tcp=80 --filter-l7=http \
  --hostlist=/path/to/list1.txt \
  --lua-desync=multisplit \
  --new \
  --filter-tcp=443 --filter-l7=tls \
  --hostlist-exclude=/path/to/exclude.txt \
  --lua-desync=fake:blob=fake_default_tls \
  --new \
  --filter-udp=443 --filter-l7=quic \
  --lua-desync=fake:blob=fake_default_quic
```

### –ü—Ä–∏–º–µ—Ä 4: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π hostlist
```bash
nfqws2 \
  --filter-tcp=443 --filter-l7=tls \
  --hostlist-auto=/var/lib/zapret/auto.txt \
  --hostlist-auto-fail-threshold=3 \
  --hostlist-auto-fail-time=60 \
  --hostlist-auto-retrans-threshold=2 \
  --lua-desync=fake:blob=fake_default_tls
```

### –ü—Ä–∏–º–µ—Ä 5: IP —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
```bash
nfqws2 \
  --filter-tcp=443 \
  --ipset=/path/to/blocked_ips.txt \
  --ipset-exclude-ip=192.168.0.0/16,10.0.0.0/8 \
  --lua-desync=fake:blob=fake_default_tls
```

---

## üìù **–í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**

1. **–ü–æ—Ä—è–¥–æ–∫ —Ñ–∏–ª—å—Ç—Ä–æ–≤:** –§–∏–ª—å—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (AND –ª–æ–≥–∏–∫–∞)
2. **TCP/UDP –≤–∑–∞–∏–º–æ–∏—Å–∫–ª—é—á–µ–Ω–∏–µ:** –£–∫–∞–∑–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ TCP —Ñ–∏–ª—å—Ç—Ä–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç UDP –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç
3. **Hostlist subdomains:** –ü–æ–¥–¥–æ–º–µ–Ω—ã –≤–∫–ª—é—á–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:** –ú–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ `--ipset`, `--hostlist` –∏ —Ç.–¥.
5. **Gzip –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** –§–∞–π–ª—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Å–∂–∞—Ç—ã gzip
6. **–ü—Ä–æ—Ñ–∏–ª–∏:** –ö–∞–∂–¥—ã–π –ø—Ä–æ—Ñ–∏–ª—å (—Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–π `--new`) –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Ñ–∏–ª—å—Ç—Ä—ã

–§–∏–ª—å—Ç—Ä—ã –ø–æ–∑–≤–æ–ª—è—é—Ç —Ç–æ—á–Ω–æ —Ç–∞—Ä–≥–µ—Ç–∏—Ä–æ–≤–∞—Ç—å desync-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–∞ –Ω—É–∂–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É—è –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ —Å–∏—Å—Ç–µ–º—É!